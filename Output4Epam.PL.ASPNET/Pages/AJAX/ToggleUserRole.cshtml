@using System.Text
@using Output4Epam.Providers
@using Output4Epam.Entities
@using Newtonsoft.Json

@{
	string login = Request["Login"];
	string action = Request["Action"];
	RoleScroll role = RoleScroll.None;

	switch (action)
	{
		case "ban":
			role = RoleScroll.Ban;
			break;
		case "togglevip":
			role = RoleScroll.VIP;
			break;
		case "toggleadmin":
			role = RoleScroll.Admin;
			break;
		default:
			break;
	}

	LogicProvider.RegUserLogic.ToggleRole(login, role);

	string[] roles = LogicProvider.RegUserLogic.GetRolesForUser(login);

	StringBuilder sb = new StringBuilder(32);
	for (int i = 0; i < roles.Length - 1; ++i)
	{
		sb.Append(roles[i] + ", ");
	}
	sb.Append(roles[roles.Length - 1]);

	Response.Write(sb.ToString());
}